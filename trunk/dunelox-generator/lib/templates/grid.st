<?xml version="1.0" encoding="utf-8"?>
<!-- 	$class$Grid is generated by Flexolop FlexGenerator on $timestamp$ -->

<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%"
	xmlns:phw="com.philemonworks.flex.navigation.*" >
	
	<mx:VBox width="100%" height="100%">
		<mx:DataGrid id="grid" width="100%" height="100%">
			<mx:columns>
$columns$	
			</mx:columns>
		</mx:DataGrid>
		<mx:HBox width="100%" verticalAlign="middle">
			<mx:Label text="{NLS.text('label.search','Search:')}" />
			<mx:TextInput id="searchTxt" />
			<mx:Button id="searchBtn" label="{NLS.text('button.go','Go')}" click="doSearch()" />
			<mx:Button label="{NLS.text('button.clip','Clip')}" click="doClip()" />
			<mx:Label text="{NLS.text('label.pages','Pages:')}" />
			<phw:PageNavigationBar id="navigationBar" width="100%" horizontalGap="0"/>	
			<mx:Button id="refreshBtn" label="{NLS.text('button.refresh','Refresh')}" click="{navigator.refresh()}" />
			<mx:Spacer width="4" />					
		</mx:HBox>
	</mx:VBox>
	
	<phw:PageNavigator
		id="navigator"
		dataGrid="{grid}" 
		navigationBar="{navigationBar}" 
		pageLoaded="populateGrid" />	
	
	<mx:Script>
		<![CDATA[
			import com.philemonworks.flex.nls.NLS;
			import com.philemonworks.flex.navigation.PageNavigator;
						
			private function populateGrid(data:XML):void {
	    		if (data.$model$ != null) {				
	    			grid.dataProvider = data.$model$
		    		navigator.updatePageInfo(
		    			 Number(data.@from)
		    			,Number(data.@to)
		    			,Number(data.@total) );
	    		}
			}			
			
			/**
			 * Copy the contents of the grid to the System clipboard.
			 * If a selection was made, copy that selection only
			 * Otherwise, copy the complete contents of the grid.
			 */
			public function doClip():void {
				if (grid.selectedIndex == -1) // complete table
					System.setClipboard(grid.dataProvider.toString())
				else // one row
					System.setClipboard(grid.selectedItem.toString())
			}		
			/**
			 * Search for records that match the search pattern
			 */	
			public function doSearch():void {
			
			}
		]]>
	</mx:Script>	
</mx:Canvas>